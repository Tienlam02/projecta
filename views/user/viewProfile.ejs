<%- include('../uservisit/header.ejs') %> <%- include('../uservisit/nav.ejs') %>

<section class="vh-100" style="background-color: #f4f5f7">
  <div class="container py-5 h-100">
    <div class="row d-flex justify-content-center align-items-center h-100">
      <div class="col col-lg-6 mb-4 mb-lg-0">
        <div class="card mb-3" style="border-radius: 0.5rem">
          <div class="row g-0">
            <div
              class="col-md-4 gradient-custom text-center text-white"
              style="
                border-top-left-radius: 0.5rem;
                border-bottom-left-radius: 0.5rem;
              "
            >
              <img
                style="width: auto; height: auto"
                src="/images/<%=user.image%>"
                alt="Avatar"
                class="img-fluid my-5"
              />
              <button
                type="button"
                class="btn btn-outline-success"
                data-bs-toggle="modal"
                data-bs-target="#exampleModal"
              >
                Sửa thông tin
              </button>
            </div>
            <div class="col-md-8">
              <div class="card-body p-4">
                <h6><%=user.fullname%></h6>
                <hr class="mt-0 mb-4" />
                <div class="row pt-1">
                  <div class="col-6 mb-3">
                    <h6>Email:</h6>
                    <p class="text-muted"><%=user.email%></p>
                  </div>
                  <div class="col-6 mb-3">
                    <h6>Phone:</h6>
                    <p class="text-muted"><%=user.phonenumber%></p>
                  </div>
                </div>
                <h6>Web bán hàng demo</h6>
                <hr class="mt-0 mb-4" />
                <div class="row pt-1">
                  <div class="col-6 mb-3">
                    <h6>Address</h6>
                    <p class="text-muted"><%=user.address%></p>
                  </div>
                  <div class="col-6 mb-3">
                    <h6>Contact Me</h6>
                    <p class="text-muted d-flex justify-content-lg-around">
                      <i class="bi bi-facebook"></i
                      ><i class="bi bi-twitter"></i>
                      <i class="bi bi-youtube"></i>
                      <i class="bi bi-google"></i>
                    </p>
                  </div>
                </div>
                <div class="d-flex justify-content-start"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<%- include('../uservisit/footer.ejs') %>
<!-- Button trigger modal -->

<!-- Modal -->
<div
  class="modal fade"
  id="exampleModal"
  tabindex="-1"
  aria-labelledby="exampleModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog" style="position: absolute; left: 100px">
    <div class="modal-content" style="width: 80vw">
      <div class="modal-header">
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        <form
          method="post"
          action="/user/updateProfile"
          enctype="multipart/form-data"
        >
          <section class="vh-60" style="background-color: #eee">
            <div class="container h-100">
              <div
                class="row d-flex justify-content-center align-items-center h-100"
              >
                <div class="col-lg-12 col-xl-11 mt-5">
                  <div class="card text-black" style="border-radius: 25px">
                    <div class="card-body p-md-5">
                      <div class="row justify-content-center">
                        <div
                          class="col-md-10 col-lg-6 col-xl-5 order-2 order-lg-1"
                        >
                          <p
                            class="text-center h1 fw-bold mb-5 mx-1 mx-md-4 mt-4"
                          >
                            Sửa thông tin
                          </p>

                          <form
                            method="post"
                            action="/user/updateProfile"
                            class="mx-1 mx-md-4"
                            enctype="multipart/form-data"
                          >
                            <div
                              class="d-flex flex-row align-items-center mb-4"
                            >
                              <i class="fas fa-user fa-lg me-3 fa-fw"></i>
                              <div class="form-outline flex-fill mb-0">
                                <label class="form-label" for="form3Example1c"
                                  >Your Image</label
                                >
                                <input
                                  type="file"
                                  id="image"
                                  class="form-control"
                                  name="image"
                                />
                              </div>
                            </div>
                            <div
                              class="d-flex flex-row align-items-center mb-4"
                            >
                              <i class="fas fa-user fa-lg me-3 fa-fw"></i>
                              <div class="form-outline flex-fill mb-0">
                                <label class="form-label" for="form3Example1c"
                                  >Your Name</label
                                >
                                <input
                                  type="text"
                                  id="fullname"
                                  class="form-control"
                                  name="fullname"
                                  value="<%=locals.user.fullname%>"
                                />
                              </div>
                            </div>

                            <div
                              class="d-flex flex-row align-items-center mb-4"
                            >
                              <i class="fas fa-envelope fa-lg me-3 fa-fw"></i>
                              <div class="form-outline flex-fill mb-0">
                                <label class="form-label" for="form3Example3c"
                                  >Your Email</label
                                >
                                <input
                                  type="email"
                                  id="email"
                                  class="form-control"
                                  name="email"
                                  value="<%=locals.user.email%>"
                                />
                              </div>
                            </div>
                            <div
                              class="d-flex flex-row align-items-center mb-4"
                            >
                              <i class="fas fa-user fa-lg me-3 fa-fw"></i>
                              <div class="form-outline flex-fill mb-0">
                                <label class="form-label" for="form3Example1c"
                                  >Your Phone</label
                                >
                                <input
                                  type="number"
                                  id="phone"
                                  class="form-control"
                                  name="phonenumber"
                                  value="<%=locals.user.phonenumber%>"
                                />
                              </div>
                            </div>
                            <div
                              class="d-flex flex-row align-items-center mb-4"
                            >
                              <i class="fas fa-user fa-lg me-3 fa-fw"></i>
                              <div class="form-outline flex-fill mb-0">
                                <label class="form-label" for="form3Example1c"
                                  >Your Address</label
                                >
                                <input
                                  type="text"
                                  id="address"
                                  class="form-control"
                                  name="address"
                                  value="<%=locals.user.address%>"
                                />
                              </div>
                            </div>

                            <div
                              class="d-flex justify-content-center mx-4 mb-3 mb-lg-4"
                            >
                              <button
                                type="submit"
                                onclick="return val()"
                                class="btn btn-primary btn-lg"
                              >
                                Cập nhật
                              </button>
                            </div>
                          </form>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>
        </form>
      </div>
    </div>
  </div>
</div>
<script>
  function val() {
    let mess = "";

    let password = document.getElementById("password").value.trim();
    if (!password) {
      mess += "Password không được để trống \n";
    }
    let rpassword = document.getElementById("rpassword").value.trim();
    if (!rpassword) {
      mess += "Nhập lại Password không được để trống \n";
    }
    let name = document.getElementById("name").value.trim();
    if (!name) {
      mess += "Tên không được để trống \n";
    }
    let email = document.getElementById("email").value.trim();
    if (!email) {
      mess += "Email không được để trống \n";
    }
    let address = document.getElementById("address").value.trim();
    if (!address) {
      mess += "Địa chỉ không được để trống \n";
    }
    let phone = document.getElementById("phone").value.trim();
    if (!phone) {
      mess += "Số điện thoại không được để trống \n";
    }
    if (rpassword !== password) {
      mess += "Password không trùng vui lòng kiểm tra lại \n";
    }
    if (mess) {
      alert(mess);
      return false;
    }
    return true;
  }
</script>
